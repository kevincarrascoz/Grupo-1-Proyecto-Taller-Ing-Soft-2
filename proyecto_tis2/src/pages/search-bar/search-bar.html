<!--
  Generated template for the SearchBarPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="lightblue">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-searchbar animated placeholder="Buscar" *ngIf="isSearchbarOpened" (ionInput)="onSearch($event)" (ionClear)="resetFilter()"></ion-searchbar>
 </ion-navbar>
  </ion-header>

<ion-content padding> 
  <ion-item>
    <ion-label>Filtrar por Oficio</ion-label>
    <ion-select name="f_oficio" #f_oficio>
      <ion-option value="none">None</ion-option>
      <ion-option *ngFor="let of of oficios" value="{{of.nombre_oficio}}">{{of.nombre_oficio}}</ion-option>
    </ion-select>
  </ion-item>
  <button ion-button full (click)="Filtrar()">Filtrar</button>
  <ion-card *ngFor="let pub of publicaciones" (click)="detalle(pub.id_publicacion)">
    <ion-item >
        <ion-avatar item-start>
          <img src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png">
        </ion-avatar>
        <h2><b>{{pub.nombre}} {{pub.apellido}}</b></h2>
        <h2>{{pub.nombre_oficio}}</h2>
        <h2>{{pub.nombre_comuna}}</h2>
      </ion-item>
    
      
      <ion-card-content>
        <p>{{pub.descripcion}}</p>
      </ion-card-content>
    
      <ion-row>
        <ion-col>
          <button ion-button icon-start clear small>
            <ion-icon name="add-circle"></ion-icon>
            <div>Ver mas</div>
          </button>
        </ion-col>
        <ion-col align-self-center text-center>
          <ion-note>
            {{pub.fecha_publicacion}}
          </ion-note>
        </ion-col>
      </ion-row>
    
    </ion-card> 
  
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
      <ion-infinite-scroll-content ></ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>
