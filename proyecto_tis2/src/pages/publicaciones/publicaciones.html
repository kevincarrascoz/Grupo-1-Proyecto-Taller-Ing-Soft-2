<!--
  Generated template for the PublicacionesPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar color="lightblue" padding>
    <ion-buttons start left>
      <button ion-button menuToggle  icon-only>
        <ion-icon name="menu"></ion-icon>
      </button>     
    </ion-buttons>
    <ion-title text-center>Tus Expertos</ion-title>
    <ion-buttons end >
      <button ion-button  icon-only (click)="buscar()">
        <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
  <ion-navbar>
    <ion-title text-center>Publicaciones recientes</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <div *ngIf="Relacionado">
    <ion-card *ngFor="let pub of publicaciones" style="border-radius:20px ;" >
  <ion-item  style="border-radius:20px ;" >
      <ion-avatar item-start>
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png">
      </ion-avatar>
      <h2><b>{{pub.nombre}} {{pub.apellido}}</b></h2> 
      <h2>{{pub.nombre_oficio}}</h2>
      <h2>{{pub.nombre_comuna}}, {{pub.nombre_region}}</h2>
      
    </ion-item>

    <ion-row>
      <ion-col style="padding-top: 0;">
        <button ion-button icon-start clear small>
          <ion-icon name="add-circle"></ion-icon>
          <div  (click)="detalle(pub.id_publicacion)">Ver más</div>
        </button> 
      </ion-col>
      <ion-col style="padding-top: 0; margin-top: 0;">
         <ion-item>
            <ion-icon name="eye" style="font-size: 15px;"  top right  justify-content: center>  {{pub.visitas}}</ion-icon>    
        </ion-item>
      </ion-col>
       
      <ion-col align-self-center text-center>
        <ion-note>
          {{pub.fecha_publicacion}}
        </ion-note>
      </ion-col>
    </ion-row>
  
  </ion-card>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content ></ion-infinite-scroll-content>
  </ion-infinite-scroll>

</div>
<div *ngIf="!Relacionado" padding>
  <h3 text-center>Lo sentimos, aún no existen publicaciones relacionadas al oficio {{nombre_oficio}} en tu comuna {{nombre_comuna}}, vuelve a intentarlo mas tarde.</h3>
</div>
</ion-content>

